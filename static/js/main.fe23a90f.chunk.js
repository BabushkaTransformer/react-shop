(this.webpackJsonpless_31_page=this.webpackJsonpless_31_page||[]).push([[0],{186:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"setBooks",(function(){return O}));var n={};a.r(n),a.d(n,"setFilter",(function(){return g})),a.d(n,"setSearchQuery",(function(){return N}));var c={};a.r(c),a.d(c,"addToCart",(function(){return A})),a.d(c,"removeToCart",(function(){return Q}));var i=a(0),l=a.n(i),o=a(17),s=a.n(o),u=a(5),d=a(3),m=a(62),f=a.n(m),_=a(1),E={isReady:!1,item:null},b=a(66),p={items:[]},v={searchQuery:"",filterBy:"all"},h=Object(d.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOK":return Object(_.a)(Object(_.a)({},e),{},{item:t.payload,isReady:!0});case"SET_IS_READY":return Object(_.a)(Object(_.a)({},e),{},{isReady:t.payload});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return Object(_.a)(Object(_.a)({},e),{},{items:[].concat(Object(b.a)(e.items),[t.payload])});case"REMOVE_FROM_CART":return Object(_.a)(Object(_.a)({},e),{},{items:e.items.filter((function(e){return e.id!==t.payload}))});default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER":return Object(_.a)(Object(_.a)({},e),{},{filterBy:t.payload});case"SET_QUERY":return Object(_.a)(Object(_.a)({},e),{},{searchQuery:t.payload});default:return e}}}),O=(a(76),function(e){return{type:"SET_BOOK",payload:e}}),y=a(63),j=a.n(y),g=function(e){return{type:"SET_FILTER",payload:e}},N=function(e){return{type:"SET_QUERY",payload:e}},C=function(e){var t=e.id,a=e.title,r=e.price,n=e.image,c=e.author,i=e.removeToCart;return l.a.createElement("div",{className:"cart__item"},l.a.createElement("img",{src:n,alt:""}),l.a.createElement("div",{className:"cart__desc"},l.a.createElement("h5",null,a),l.a.createElement("h6",null,c),l.a.createElement("h5",null,r," \u0441\u043e\u043c\u043e\u0432")),l.a.createElement("button",{onClick:i.bind(void 0,t)},"X"))},k=a(64),R=a.n(k),T=function(e){var t=e.totalPrice,a=e.\u0441ount,r=e.items;return l.a.createElement("div",{className:"header"},l.a.createElement("div",{className:"header__container container"},l.a.createElement("div",{className:"header__logo"},"book",l.a.createElement("span",null,"Store")),l.a.createElement("div",{className:"header__total"},t," \u0441\u043e\u043c"),l.a.createElement("div",{className:"header__cart cart"},l.a.createElement("img",{src:R.a,alt:""})," ",l.a.createElement("span",{className:"top_label"},a),l.a.createElement("div",{className:"cart__hidden"},r.map((function(e,t){return l.a.createElement(C,Object.assign({key:t},e))}))))))},w=a(65),B=a.n(w),S=Object(u.b)((function(e){var t=e.cart;return{totalPrice:t.items.reduce((function(e,t){return e+t.price}),0),"\u0441ount":t.items.length,items:B()(t.items,(function(e){return e.id}))}}),(function(e){return Object(_.a)({},Object(d.b)(n,e))}))(T),A=function(e){return{type:"ADD_TO_CART",payload:e}},Q=function(e){return{type:"REMOVE_FROM_CART",payload:e}},F=function(e){var t=e.title,a=e.author,r=e.price,n=e.image,c=e.addToCart,i=e.addedCount;return l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card__inner"},l.a.createElement("img",{src:n,alt:"",className:"card__img"}),l.a.createElement("div",{className:"card__description"},l.a.createElement("h3",{className:"card__title"},t),l.a.createElement("h4",{className:"card__author"},a),l.a.createElement("div",{className:"card__price"},r," \u0441\u043e\u043c"),l.a.createElement("button",{onClick:c.bind(void 0,e),className:"card__button"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443 ",i>0&&"(".concat(i,")")))))},L=Object(u.b)((function(e,t){var a=e.cart,r=t.id;return{addedCount:a.items.reduce((function(e,t){return e+(t.id===r?1:0)}),0)}}),(function(e){return Object(_.a)({},Object(d.b)(c,e))}))(F),x=function(e){var t=e.setFilter,a=e.filterBy,r=e.searchQuery,n=e.setSearchQuery,c=function(e){t(e.target.getAttribute("name"))};return l.a.createElement("div",{className:"sidebar"},l.a.createElement("div",{className:"sidebar__filter"},l.a.createElement("span",{name:"all",active:"all"===a,onClick:c},"\u0412\u0441\u0435"),l.a.createElement("span",{name:"author",active:"author"===a,onClick:c},"\u0410\u0432\u0442\u043e\u0440"),l.a.createElement("span",{name:"high_price",active:"high_price"===a,onClick:c},"\u0426\u0435\u043d\u0430(\u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e)"),l.a.createElement("span",{name:"low_price",active:"low_price"===a,onClick:c},"\u0426\u0435\u043d\u0430 (\u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e)")),l.a.createElement("div",{className:"sidebar__input"},l.a.createElement("input",{type:"text",onChange:function(e){return n(e.target.value)},value:r,placeholder:"\u041f\u043e\u0438\u0441\u043a"})))},D=Object(u.b)((function(e){e.books;return{filterBy:e.filter.filterBy}}),(function(e){return Object(_.a)({},Object(d.b)(n,e))}))(x),I=function(e){var t=e.books,a=e.isReady;return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"content__inner container"},l.a.createElement("div",{className:"content__left"},a?t.map((function(e,t){return l.a.createElement(L,Object.assign({key:t},e))})):"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),l.a.createElement("div",{className:"content__right"},l.a.createElement(D,null))))};var M=function(e){return Object(i.useEffect)((function(){var t=e.setBooks;j.a.get("/books.json").then((function(e){var a=e.data;t(a)}))}),[]),l.a.createElement("div",null,l.a.createElement(S,null),l.a.createElement(I,e))},Y=a(18),J=a.n(Y),K=function(e,t,a){return function(e,t){switch(t){case"all":return e;case"author":return J()(e,"author","asc");case"high_price":return J()(e,"price","desc");case"low_price":return J()(e,"price","asc");default:return e}}(function(e,t){return e.filter((function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>=0||e.author.toLowerCase().indexOf(t.toLowerCase())>=0}))}(e,a),t)},P=Object(u.b)((function(e){var t=e.books,a=e.filter;return{books:t.item&&K(t.item,a.filterBy,a.searchQuery),isReady:t.isReady}}),(function(e){return Object(_.a)({},Object(d.b)(r,e))}))(M),U=Object(d.d)(h,Object(d.a)(f.a));s.a.render(l.a.createElement(u.a,{store:U},l.a.createElement(P,null)),document.getElementById("root"))},64:function(e,t,a){e.exports=a.p+"static/media/cart.11883816.svg"},67:function(e,t,a){e.exports=a(186)},76:function(e,t,a){}},[[67,1,2]]]);
//# sourceMappingURL=main.fe23a90f.chunk.js.map